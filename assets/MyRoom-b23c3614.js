import{n as w,b as $,r,j as e,u as L,o as M,p as P,q as O,t as U}from"./index-5fa712c3.js";import{H as W,a as k}from"./index.esm-acc57b4b.js";import{s as A,F,a as S,b as a,S as v,c as V,P as B}from"./PopUp-27acff56.js";const R="_wrapper_118ls_1",G="_title_118ls_19",T="_formWrapper_118ls_31",Q="_formItem_118ls_41",z="_label_118ls_49",J="_field_118ls_57",K="_quantityField_118ls_71",X="_inputArray_118ls_79",Y="_selectComponent_118ls_89",Z="_minBtn_118ls_97",H="_btn_118ls_117",ee="_error_118ls_145",t={wrapper:R,title:G,formWrapper:T,formItem:Q,label:z,field:J,quantityField:K,inputArray:X,selectComponent:Y,minBtn:Z,btn:H,error:ee};w.defaults.baseURL={}.VITE_SERVER_URL;const se=[{value:"sofa",label:"Sofa"},{value:"bed",label:"Bed"}],te=()=>{const y=$(A).array;let m=[];y.forEach(n=>{m.push({value:n._id,label:`${n.name}/${n.units}`})});const[d,x]=r.useState({value:"sofa",label:"Sofa"}),[g,b]=r.useState(""),[p,_]=r.useState([]),u=n=>{b(n.target.files)};return e.jsxs("div",{className:t.wrapper,children:[e.jsx("h2",{className:t.title,children:"Collection Editor"}),e.jsx(F,{initialValues:{group:d.value,name:"",dimensions:{width:"",height:"",depth:""},subscription:"",basePrice:"",images:[""],components:[""],quantity:[""]},onSubmit:async(n,{resetForm:f})=>{try{const i=new FormData;i.append("group",d.value),i.append("name",n.name),i.append("dimensions[width]",n.dimensions.width),i.append("dimensions[height]",n.dimensions.height),i.append("dimensions[depth]",n.dimensions.depth),i.append("subscription",n.subscription),i.append("basePrice",n.basePrice),p.forEach((N,o)=>{const h=p[o],C=n.quantity[o];i.append(`components[${o}][id]`,h),i.append(`components[${o}][quantity]`,C)}),i.append("file",g[0]),await w.post("/collections/add",i,{headers:{"Content-Type":"multipart/form-data"}}),_([]),f()}catch(i){console.log(i)}},children:e.jsxs(S,{className:t.formWrapper,children:[e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"group",children:"Group"}),e.jsx(a,{component:v,name:"group",id:"group",onChange:n=>x(n),options:se,defaultValue:d.value})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(a,{className:t.field,id:"name",name:"name",placeholder:"Faynee mini"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.width",children:"Width"}),e.jsx(a,{className:t.field,id:"dimensions.width",name:"dimensions.width",placeholder:"Width"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.depth",children:"Depth"}),e.jsx(a,{className:t.field,id:"dimensions.depth",name:"dimensions.depth",placeholder:"Depth"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.height",children:"Height"}),e.jsx(a,{className:t.field,id:"dimensions.height",name:"dimensions.height",placeholder:"Height"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"subscription",children:"Subscription"}),e.jsx(a,{className:t.field,id:"subscription",name:"subscription",placeholder:"Subscription"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"basePrice",children:"Base price"}),e.jsx(a,{className:t.field,id:"basePrice",name:"basePrice",placeholder:"12500"})]}),e.jsx("div",{className:t.formItem,children:e.jsx(a,{className:t.field,id:"files",name:"files",type:"file",onChange:u})}),e.jsx("div",{className:t.formItem,children:e.jsx(V,{name:"components",render:n=>e.jsx("div",{children:n.form.values.components.map((f,i)=>e.jsxs("div",{className:t.inputArray,children:[e.jsx(a,{component:v,className:t.selectComponent,name:`components.${i}`,onChange:N=>_(o=>{const h=[...o];return h[i]=N.value,h}),options:m}),e.jsx(a,{className:`${t.field} ${t.quantityField}`,name:`quantity.${i}`,placeholder:"Quantity"}),n.form.values.components.length>1?e.jsx("button",{className:t.minBtn,type:"button",onClick:()=>{n.remove(i),n.form.values.quantity.splice(i,1)},children:"-"}):e.jsx(e.Fragment,{}),i===n.form.values.components.length-1&&e.jsx("button",{className:t.minBtn,type:"button",onClick:()=>{n.push(""),n.form.values.quantity.push("")},children:"+"})]},i))})})}),e.jsx("button",{type:"submit",className:t.btn,children:"Submit"})]})})]})},ne="_wrapper_1pheq_1",le="_titleArea_1pheq_21",ie="_openBtn_1pheq_31",ae="_openBtnIcon_1pheq_55",oe="_active_1pheq_67",ce="_list_1pheq_77",re="_item_1pheq_87",de="_price_1pheq_121",me="_buttons_1pheq_129",pe="_editBtn_1pheq_137",he="_title_1pheq_21",ue="_formItem_1pheq_173",je="_field_1pheq_211",xe="_inputArray_1pheq_231",be="_btn_1pheq_239",_e="_delBtn_1pheq_261",s={wrapper:ne,titleArea:le,openBtn:ie,openBtnIcon:ae,active:oe,list:ce,item:re,price:de,buttons:me,editBtn:pe,title:he,formItem:ue,field:je,inputArray:xe,btn:be,delBtn:_e},fe=[{value:"USD",label:"USD"},{value:"грн",label:"грн"}],Ne=[{value:"шт",label:"шт"},{value:"м",label:"м"},{value:"кг",label:"кг"}];let c={};const ve=()=>{const y=$(A),m=L(),[d,x]=r.useState(!1),[g,b]=r.useState(!1),[p,_]=r.useState({value:"грн",label:"грн"}),[u,n]=r.useState({value:"шт.",label:"шт"}),[f,i]=r.useState(!1),N=l=>{c=l,i(!0),document.body.classList.add("modal-open")},o=()=>{i(!1),document.body.classList.remove("modal-open")},h=()=>{m(U(c._id)),o()},C=l=>{x(!d),d?l.target.classList=s.notActive:l.target.classList=s.active},E=l=>{c=l,console.log(c),b(!0),document.body.classList.add("modal-open")},q=()=>{b(!1),document.body.classList.remove("modal-open")},D=()=>{try{return y.array.map(l=>e.jsxs("li",{className:s.item,children:[e.jsx("p",{children:l.name}),e.jsx("div",{children:e.jsx("p",{children:l.subscription})}),e.jsxs("div",{className:s.price,children:[e.jsxs("p",{children:["Price: ",l.price]}),e.jsx("p",{children:l.currency}),e.jsxs("p",{children:["/",l.units]})]}),e.jsxs("div",{className:s.buttons,children:[e.jsx("button",{className:s.editBtn,onClick:()=>E(l),children:"Edit"}),e.jsx("button",{className:s.editBtn,onClick:()=>N(l),children:"Delete"})]})]},l._id))}catch(l){return console.log(l),e.jsx(e.Fragment,{})}};return e.jsxs("div",{className:s.wrapper,children:[e.jsxs("div",{className:s.titleArea,children:[e.jsx("p",{className:s.title,children:"Component list"}),e.jsx("button",{className:s.openBtn,id:"isOpen",onClick:C,children:e.jsx("svg",{children:e.jsx("use",{className:s.openBtnIcon,href:`${M}#icon-arrow-down`,width:"32px"})})})]}),d?e.jsxs("div",{children:[e.jsx("ul",{className:s.list,children:e.jsx(D,{})}),e.jsx("p",{className:s.title,children:"Add new component"}),e.jsx(F,{initialValues:{name:"",subscription:"",price:"",currency:p.value,units:u.value},onSubmit:async(l,{resetForm:j})=>{try{const I={...l,currency:p.value,units:u.value};m(P(I)),j()}catch(I){console.log(I)}},children:e.jsxs(S,{className:s.formWrapper,children:[e.jsx("div",{className:s.formItem,children:e.jsx(a,{className:s.field,id:"name",name:"name",placeholder:"Name"})}),e.jsx("div",{className:s.formItem,children:e.jsx(a,{className:s.field,id:"subscription",name:"subscription",placeholder:"Subscription"})}),e.jsx("div",{className:s.formItem,children:e.jsx(a,{className:s.field,id:"price",name:"price",placeholder:"Price"})}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsx(a,{component:v,name:"currency",id:"currency",onChange:l=>_(l),options:fe,defaultValue:p.value})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"units",children:"Units"}),e.jsx(a,{component:v,name:"units",id:"units",onChange:l=>n(l),options:Ne,defaultValue:u.value})]}),e.jsx("button",{type:"submit",className:s.btn,children:"Add component"})]})}),e.jsx(B,{isOpen:g,close:q,body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Edit mode"}),e.jsx(F,{initialValues:{name:c.name,subscription:c.subscription,price:c.price,currency:c.currency,units:c.units},onSubmit:async l=>{try{const j=c._id;m(O({id:j,...l})),q()}catch(j){console.log(j)}},children:e.jsxs(S,{className:s.formWrapper,children:[e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(a,{className:s.field,id:"name",name:"name"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"subscription",children:"Subscription"}),e.jsx(a,{className:s.field,id:"subscription",name:"subscription"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx(a,{className:s.field,id:"price",name:"price"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsx(a,{className:s.field,id:"currency",name:"currency"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"units",children:"Units"}),e.jsx(a,{className:s.field,id:"units",name:"units"})]}),e.jsx("button",{type:"submit",className:s.btn,children:"Submit"})]})})]})}),e.jsx(B,{isOpen:f,close:o,body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure???"}),e.jsxs("div",{className:s.delModalWrapper,children:[e.jsx("button",{onClick:o,className:s.btn,children:"Cancel"}),e.jsx("button",{onClick:h,className:`${s.btn} ${s.delBtn}`,children:"Delete"})]})]})})]}):e.jsx(e.Fragment,{})]})};function Ie(){return e.jsx(e.Fragment,{children:e.jsxs(W,{children:[e.jsx(k,{children:e.jsx("title",{children:"My room"})}),e.jsx("h1",{children:"It's your private room"}),e.jsx(te,{}),e.jsx(ve,{})]})})}export{Ie as default};

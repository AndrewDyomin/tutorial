import{n as $,b as A,r,j as e,u as q,o as M,p as P,q as O,t as U}from"./index-dfa0d22c.js";import{H as W,a as k}from"./index.esm-be44e6d7.js";import{s as E,F,a as S,b as l,S as v,c as V,P as w}from"./PopUp-d1c6db05.js";const R="_wrapper_8t3nm_1",G="_title_8t3nm_10",T="_formWrapper_8t3nm_16",Q="_formItem_8t3nm_21",z="_label_8t3nm_25",J="_field_8t3nm_29",K="_quantityField_8t3nm_36",X="_inputArray_8t3nm_40",Y="_selectComponent_8t3nm_45",Z="_minBtn_8t3nm_49",H="_btn_8t3nm_59",ee="_error_8t3nm_73",t={wrapper:R,title:G,formWrapper:T,formItem:Q,label:z,field:J,quantityField:K,inputArray:X,selectComponent:Y,minBtn:Z,btn:H,error:ee};$.defaults.baseURL={}.VITE_SERVER_URL;const se=[{value:"sofa",label:"Sofa"},{value:"bed",label:"Bed"}],te=()=>{const y=A(E).array;let m=[];y.forEach(n=>{m.push({value:n._id,label:`${n.name}/${n.units}`})});const[d,x]=r.useState({value:"sofa",label:"Sofa"}),[g,b]=r.useState(""),[p,_]=r.useState([]),h=n=>{b(n.target.files)};return e.jsxs("div",{className:t.wrapper,children:[e.jsx("h2",{className:t.title,children:"Collection Editor"}),e.jsx(F,{initialValues:{group:d.value,name:"",dimensions:{width:"",height:"",depth:""},subscription:"",basePrice:"",images:[""],components:[""],quantity:[""]},onSubmit:async(n,{resetForm:f})=>{try{const i=new FormData;i.append("group",d.value),i.append("name",n.name),i.append("dimensions[width]",n.dimensions.width),i.append("dimensions[height]",n.dimensions.height),i.append("dimensions[depth]",n.dimensions.depth),i.append("subscription",n.subscription),i.append("basePrice",n.basePrice),p.forEach((N,o)=>{const u=p[o],C=n.quantity[o];i.append(`components[${o}][id]`,u),i.append(`components[${o}][quantity]`,C)}),i.append("file",g[0]),await $.post("/collections/add",i,{headers:{"Content-Type":"multipart/form-data"}}),_([]),f()}catch(i){console.log(i)}},children:e.jsxs(S,{className:t.formWrapper,children:[e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"group",children:"Group"}),e.jsx(l,{component:v,name:"group",id:"group",onChange:n=>x(n),options:se,defaultValue:d.value})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(l,{className:t.field,id:"name",name:"name",placeholder:"Faynee mini"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.width",children:"Width"}),e.jsx(l,{className:t.field,id:"dimensions.width",name:"dimensions.width",placeholder:"Width"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.depth",children:"Depth"}),e.jsx(l,{className:t.field,id:"dimensions.depth",name:"dimensions.depth",placeholder:"Depth"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"dimensions.height",children:"Height"}),e.jsx(l,{className:t.field,id:"dimensions.height",name:"dimensions.height",placeholder:"Height"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"subscription",children:"Subscription"}),e.jsx(l,{className:t.field,id:"subscription",name:"subscription",placeholder:"Subscription"})]}),e.jsxs("div",{className:t.formItem,children:[e.jsx("label",{htmlFor:"basePrice",children:"Base price"}),e.jsx(l,{className:t.field,id:"basePrice",name:"basePrice",placeholder:"12500"})]}),e.jsx("div",{className:t.formItem,children:e.jsx(l,{className:t.field,id:"files",name:"files",type:"file",onChange:h})}),e.jsx("div",{className:t.formItem,children:e.jsx(V,{name:"components",render:n=>e.jsx("div",{children:n.form.values.components.map((f,i)=>e.jsxs("div",{className:t.inputArray,children:[e.jsx(l,{component:v,className:t.selectComponent,name:`components.${i}`,onChange:N=>_(o=>{const u=[...o];return u[i]=N.value,u}),options:m}),e.jsx(l,{className:`${t.field} ${t.quantityField}`,name:`quantity.${i}`,placeholder:"Quantity"}),n.form.values.components.length>1?e.jsx("button",{className:t.minBtn,type:"button",onClick:()=>{n.remove(i),n.form.values.quantity.splice(i,1)},children:"-"}):e.jsx(e.Fragment,{}),i===n.form.values.components.length-1&&e.jsx("button",{className:t.minBtn,type:"button",onClick:()=>{n.push(""),n.form.values.quantity.push("")},children:"+"})]},i))})})}),e.jsx("button",{type:"submit",className:t.btn,children:"Submit"})]})})]})},ne="_wrapper_1e2ag_1",ae="_titleArea_1e2ag_11",ie="_openBtn_1e2ag_16",le="_openBtnIcon_1e2ag_28",oe="_active_1e2ag_34",ce="_list_1e2ag_39",re="_item_1e2ag_44",de="_price_1e2ag_61",me="_buttons_1e2ag_65",pe="_editBtn_1e2ag_69",ue="_title_1e2ag_11",he="_formItem_1e2ag_87",je="_field_1e2ag_106",xe="_inputArray_1e2ag_116",be="_btn_1e2ag_120",_e="_delBtn_1e2ag_131",s={wrapper:ne,titleArea:ae,openBtn:ie,openBtnIcon:le,active:oe,list:ce,item:re,price:de,buttons:me,editBtn:pe,title:ue,formItem:he,field:je,inputArray:xe,btn:be,delBtn:_e},fe=[{value:"USD",label:"USD"},{value:"грн",label:"грн"}],Ne=[{value:"шт",label:"шт"},{value:"м",label:"м"},{value:"кг",label:"кг"}];let c={};const ve=()=>{const y=A(E),m=q(),[d,x]=r.useState(!1),[g,b]=r.useState(!1),[p,_]=r.useState({value:"грн",label:"грн"}),[h,n]=r.useState({value:"шт.",label:"шт"}),[f,i]=r.useState(!1),N=a=>{c=a,i(!0),document.body.classList.add("modal-open")},o=()=>{i(!1),document.body.classList.remove("modal-open")},u=()=>{m(U(c._id)),o()},C=a=>{x(!d),d?a.target.classList=s.notActive:a.target.classList=s.active},D=a=>{c=a,console.log(c),b(!0),document.body.classList.add("modal-open")},B=()=>{b(!1),document.body.classList.remove("modal-open")},L=()=>{try{return y.array.map(a=>e.jsxs("li",{className:s.item,children:[e.jsx("p",{children:a.name}),e.jsx("div",{children:e.jsx("p",{children:a.subscription})}),e.jsxs("div",{className:s.price,children:[e.jsxs("p",{children:["Price: ",a.price]}),e.jsx("p",{children:a.currency}),e.jsxs("p",{children:["/",a.units]})]}),e.jsxs("div",{className:s.buttons,children:[e.jsx("button",{className:s.editBtn,onClick:()=>D(a),children:"Edit"}),e.jsx("button",{className:s.editBtn,onClick:()=>N(a),children:"Delete"})]})]},a._id))}catch(a){return console.log(a),e.jsx(e.Fragment,{})}};return e.jsxs("div",{className:s.wrapper,children:[e.jsxs("div",{className:s.titleArea,children:[e.jsx("p",{className:s.title,children:"Component list"}),e.jsx("button",{className:s.openBtn,id:"isOpen",onClick:C,children:e.jsx("svg",{children:e.jsx("use",{className:s.openBtnIcon,href:`${M}#icon-arrow-down`,width:"32px"})})})]}),d?e.jsxs("div",{children:[e.jsx("ul",{className:s.list,children:e.jsx(L,{})}),e.jsx("p",{className:s.title,children:"Add new component"}),e.jsx(F,{initialValues:{name:"",subscription:"",price:"",currency:p.value,units:h.value},onSubmit:async(a,{resetForm:j})=>{try{const I={...a,currency:p.value,units:h.value};m(P(I)),j()}catch(I){console.log(I)}},children:e.jsxs(S,{className:s.formWrapper,children:[e.jsx("div",{className:s.formItem,children:e.jsx(l,{className:s.field,id:"name",name:"name",placeholder:"Name"})}),e.jsx("div",{className:s.formItem,children:e.jsx(l,{className:s.field,id:"subscription",name:"subscription",placeholder:"Subscription"})}),e.jsx("div",{className:s.formItem,children:e.jsx(l,{className:s.field,id:"price",name:"price",placeholder:"Price"})}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsx(l,{component:v,name:"currency",id:"currency",onChange:a=>_(a),options:fe,defaultValue:p.value})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"units",children:"Units"}),e.jsx(l,{component:v,name:"units",id:"units",onChange:a=>n(a),options:Ne,defaultValue:h.value})]}),e.jsx("button",{type:"submit",className:s.btn,children:"Add component"})]})}),e.jsx(w,{isOpen:g,close:B,body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Edit mode"}),e.jsx(F,{initialValues:{name:c.name,subscription:c.subscription,price:c.price,currency:c.currency,units:c.units},onSubmit:async a=>{try{const j=c._id;m(O({id:j,...a})),B()}catch(j){console.log(j)}},children:e.jsxs(S,{className:s.formWrapper,children:[e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx(l,{className:s.field,id:"name",name:"name"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"subscription",children:"Subscription"}),e.jsx(l,{className:s.field,id:"subscription",name:"subscription"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx(l,{className:s.field,id:"price",name:"price"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsx(l,{className:s.field,id:"currency",name:"currency"})]}),e.jsxs("div",{className:s.formItem,children:[e.jsx("label",{htmlFor:"units",children:"Units"}),e.jsx(l,{className:s.field,id:"units",name:"units"})]}),e.jsx("button",{type:"submit",className:s.btn,children:"Submit"})]})})]})}),e.jsx(w,{isOpen:f,close:o,body:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Are you sure???"}),e.jsxs("div",{className:s.delModalWrapper,children:[e.jsx("button",{onClick:o,className:s.btn,children:"Cancel"}),e.jsx("button",{onClick:u,className:`${s.btn} ${s.delBtn}`,children:"Delete"})]})]})})]}):e.jsx(e.Fragment,{})]})};function Ie(){return e.jsx(e.Fragment,{children:e.jsxs(W,{children:[e.jsx(k,{children:e.jsx("title",{children:"My room"})}),e.jsx("h1",{children:"It's your private room"}),e.jsx(te,{}),e.jsx(ve,{})]})})}export{Ie as default};
